<!DOCTYPE html>
<html>
<head><title>SVG Mode Test</title></head>
<body style="padding: 40px; font-family: Arial;">
    <h1>Leaf & Teardrop Test (SVG Mode)</h1>

    <div style="margin: 20px 0;">
        <h2>QR with Leaf Corner Square + Teardrop Corner Dot</h2>
        <div id="qr"></div>
    </div>

    <div id="output" style="background: #f0f0f0; padding: 15px; margin-top: 20px;"></div>

    <script src="./lib/qr-code-styling.js"></script>
    <script>
        const output = document.getElementById('output');
        const log = (msg) => {
            console.log(msg);
            output.innerHTML += msg + '<br>';
        };

        log('Creating QR with SVG type...');

        const qr = new QRCodeStyling({
            width: 400,
            height: 400,
            data: "https://example.com/test",
            type: "svg",  // FORCE SVG MODE
            margin: 10,
            cornerSquareOptions: {
                type: "leaf",
                color: "#58A366"
            },
            cornerDotOptions: {
                type: "teardrop",
                color: "#57A465"
            },
            dotsOptions: {
                color: "#000000",
                type: "rounded"
            }
        });

        qr.append(document.getElementById("qr"));
        log('QR appended');

        setTimeout(() => {
            const svg = document.querySelector('#qr svg');
            if (svg) {
                log('✓ SVG found!');

                const paths = svg.querySelectorAll('path');
                log(`✓ Total paths: ${paths.length}`);

                // Check for Q commands (quadratic curves = rounded corners)
                let roundedCount = 0;
                paths.forEach(path => {
                    const d = path.getAttribute('d');
                    if (d && d.includes(' Q ')) {
                        roundedCount++;
                    }
                });

                log(`✓ Paths with rounded corners (Q commands): ${roundedCount}`);

                if (roundedCount > 0) {
                    log('✓ SUCCESS! Leaf/teardrop shapes are rendering with rounded corners!');
                } else {
                    log('✗ WARNING: No rounded corners found');
                }
            } else {
                log('✗ ERROR: No SVG found');
            }
        }, 500);
    </script>
</body>
</html>
